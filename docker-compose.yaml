version: '2'
    
services:
    
  hello-world-app:
    build: 
      context: .
      dockerfile: ./hello-world-app/Dockerfile
    volumes:
      - shared:/shared-files
    ports:
      # Reroute Nginx listening on Port 80 over to 8080 which we've already exposed in EC2
      - "8080:80"
    environment:
      - HANA_UID=${HANA_APP_UID}
      - HANA_PWD=${HANA_APP_PWD}
      - HANA_SERVERNODE=${HANA_SERVER}
      - UPLOAD_DIR=${UPLOAD_DIR}

  sqlpad:
    image: sqlpad/sqlpad
    volumes:
      - sqlpad:/var/lib/sqlpad
    ports:
      - "8899:3000"
          
  hxehost:
    image: store/saplabs/hanaexpress:2.00.036.00.20190223.1
    hostname: hxe
    volumes:
      - hana-express:/hana/mounts
      - shared:/shared-files
    command: --agree-to-sap-license --master-password ${HXE_MASTER_PASSWORD}
    
volumes:
  hana-express:
  sqlpad:
  shared:
