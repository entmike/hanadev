version: '2'
    
services:
    
  hello-world-app:
    build: 
      context: .
      dockerfile: ./hello-world-app/Dockerfile
    ports:
      # Reroute Nginx listening on Port 80 over to 8080 which we've already exposed in EC2
      - "8080:80"
    environment:
      - HANA_UID=${HANA_APP_UID}
      - HANA_PWD=${HANA_APP_PWD}
      - HANA_SERVERNODE=${HANA_SERVER}
      - HANA_SYSTEMNODE=${HANA_SYSTEMNODE}
      - HANA_TENANTNODE=${HANA_TENANTNODE}
      - HANA_TENANTDBNAME=${HANA_TENANTDBNAME}
      - HELLO_WORLD_ADMIN_PORT=${HELLO_WORLD_ADMIN_PORT}
      - HELLO_WORLD_BACKEND_PORT=${HELLO_WORLD_BACKEND_PORT}
      - HANA_APP_UID=${HANA_APP_UID}
      - HANA_APP_PWD=${HANA_APP_PWD}
  sqlpad:
    image: sqlpad/sqlpad
    volumes:
      - sqlpad:/var/lib/sqlpad
    ports:
      - "8899:3000"
          
  hxehost:
    image: store/saplabs/hanaexpress:2.00.036.00.20190223.1
    hostname: hxe
    volumes:
      - $HOME/environment/hanadev/db-scripts:/scripts
      - hana-express:/hana/mounts
    command: --agree-to-sap-license --master-password ${HXE_MASTER_PASSWORD}
    
volumes:
  hana-express:
  sqlpad: